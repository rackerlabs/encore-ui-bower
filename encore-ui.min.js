/*
 * EncoreUI
 * https://github.com/rackerlabs/encore-ui

 * Version: 1.46.2 - 2016-04-06
 * License: Apache-2.0
 */

angular.module("encore.ui",["encore.ui.atoms","encore.ui.elements","encore.ui.molecules","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.layout","encore.ui.metadata","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.rxAccountInfo","encore.ui.rxActionMenu","encore.ui.rxActiveUrl","encore.ui.utilities","encore.ui.rxApp","encore.ui.utilities","encore.ui.rxAttributes","encore.ui.utilities","encore.ui.rxBreadcrumbs","encore.ui.utilities","encore.ui.rxBulkSelect","encore.ui.utilities","encore.ui.utilities","encore.ui.atoms","encore.ui.utilities","encore.ui.rxCharacterCount","encore.ui.atoms","encore.ui.rxCollapse","encore.ui.rxCompile","encore.ui.molecules","encore.ui.utilities","encore.ui.utilities","encore.ui.rxEnvironment","encore.ui.utilities","encore.ui.utilities","encore.ui.atoms","encore.ui.rxFeedback","encore.ui.utilities","encore.ui.utilities","encore.ui.rxFloatingHeader","encore.ui.rxForm","encore.ui.utilities","encore.ui.utilities","encore.ui.rxInfoPanel","encore.ui.utilities","encore.ui.rxLogout","encore.ui.rxMetadata","encore.ui.rxMisc","encore.ui.rxModalAction","encore.ui.utilities","encore.ui.utilities","encore.ui.rxMultiSelect","encore.ui.utilities","encore.ui.rxNotify","encore.ui.utilities","encore.ui.rxOptionTable","encore.ui.utilities","encore.ui.rxPaginate","encore.ui.utilities","encore.ui.rxPermission","encore.ui.utilities","encore.ui.rxRadio","encore.ui.utilities","encore.ui.rxSearchBox","encore.ui.rxSelect","encore.ui.rxSelectFilter","encore.ui.rxSortableColumn","encore.ui.utilities","encore.ui.utilities","encore.ui.rxSpinner","encore.ui.rxStatusColumn","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.rxTags","encore.ui.molecules","encore.ui.utilities","encore.ui.rxToggle","encore.ui.rxToggleSwitch","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.tabs","encore.ui.utilities","encore.ui.utilities","encore.ui.tooltips","encore.ui.typeahead","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","encore.ui.utilities","cfp.hotkeys","ui.bootstrap"]),angular.module("encore.ui.atoms",["encore.ui.utilities"]),angular.module("encore.ui.elements",["encore.ui.utilities"]),angular.module("encore.ui.molecules",["encore.ui.utilities","encore.ui.atoms"]),angular.module("encore.ui.utilities",["ngResource","debounce"]),angular.module("encore.ui.utilities").filter("Apply",function(){return function(a,b){return b.applyTo(a)}}),angular.module("encore.ui.utilities").factory("Auth",["Identity","Session","Permission",function(a,b,c){var d={};return _.assign(d,a),_.assign(d,b),_.assign(d,c),d}]),angular.module("encore.ui.utilities").value("devicePaths",[{value:"/dev/xvdb",label:"/dev/xvdb"},{value:"/dev/xvdd",label:"/dev/xvdd"},{value:"/dev/xvde",label:"/dev/xvde"},{value:"/dev/xvdf",label:"/dev/xvdf"},{value:"/dev/xvdg",label:"/dev/xvdg"},{value:"/dev/xvdh",label:"/dev/xvdh"},{value:"/dev/xvdj",label:"/dev/xvdj"},{value:"/dev/xvdk",label:"/dev/xvdk"},{value:"/dev/xvdl",label:"/dev/xvdl"},{value:"/dev/xvdm",label:"/dev/xvdm"},{value:"/dev/xvdn",label:"/dev/xvdn"},{value:"/dev/xvdo",label:"/dev/xvdo"},{value:"/dev/xvdp",label:"/dev/xvdp"}]),angular.module("encore.ui.utilities").factory("encoreRoutes",["rxAppRoutes","routesCdnPath","rxNotify","$q","$http","rxVisibilityPathParams","rxVisibility","Environment","rxHideIfUkAccount","LocalStorage",function(a,b,c,d,e,f,g,h,i,j){g.addVisibilityObj(f),g.addVisibilityObj(i);var k,l,m=new a,n=function(){c.add("There was a problem loading the navigation, so a cached version has been loaded for display.",{type:"warning"})},o=function(){c.add("Error loading site navigation",{type:"error"})};switch(!0){case h.isUnifiedProd():k=b.production,l="prod";break;case h.isPreProd():k=b.preprod,l="preprod";break;case b.hasCustomURL:k=b.staging,l="custom";break;default:k=b.staging,l="staging"}return m.fetchRoutes=function(){var a="encoreRoutes-"+l,b=j.getObject(a);return e.get(k).success(function(b){m.setAll(b),j.setObject(a,b)}).error(function(){b?(m.setAll(b),n()):o()}),b||[]},m}]),angular.module("encore.ui.utilities").service("Environment",["$location","$rootScope","$log",function(a,b,c){var d=[{name:"local",pattern:/\/\/(localhost|server)(:\d{1,4})?/,url:"//localhost:"+a.port()+"/{{path}}"},{name:"preprod",pattern:/\/\/preprod.encore.rackspace.com/,url:"{{path}}"},{name:"unified-preprod",pattern:/\/\/(\w+\.)encore.rackspace.com/,url:"{{path}}"},{name:"unified",pattern:"encore.rackspace.com",url:"{{path}}"},{name:"unified-prod",pattern:/\/\/encore.rackspace.com/,url:"{{path}}"}],e=function(a){return _.isString(a.name)&&(_.isString(a.pattern)||_.isRegExp(a.pattern))&&_.isString(a.url)},f=function(a,b){return _.isRegExp(b)?b.test(a):_.contains(a,b)};this.get=function(b){b=b||a.absUrl();var e=_.find(d,function(a){return f(b,a.pattern)});return _.isUndefined(e)&&(c.warn("No environments match URL: "+a.absUrl()),e=d[0]),e},this.add=function(a){e(a)?d.unshift(a):c.error("Unable to add Environment: defined incorrectly")},this.setAll=function(a){a.length>0&&_.every(d,e)&&(d=a)},this.envCheck=function(b,c){c=c||a.absUrl();var e=_.filter(d,function(a){return f(c,a.pattern)});return _.contains(_.pluck(e,"name"),b)};var g=function(a){return function(b){return this.envCheck(a,b)}};this.isPreProd=g("preprod"),this.isLocal=g("local"),this.isUnifiedPreProd=g("unified-preprod"),this.isUnified=g("unified"),this.isUnifiedProd=g("unified-prod")}]),angular.module("encore.ui.utilities").factory("ErrorFormatter",function(){var a=function(a,b){return b=b||{},_.has(b,"message")||(b.message=_.has(b,"statusText")?b.statusText:"Unknown error"),_.template(a,b)};return{buildErrorMsg:a}}),angular.module("encore.ui.utilities").constant("feedbackApi","/api/encore/feedback"),angular.module("encore.ui.utilities").value("feedbackTypes",[{label:"Software Bug",prompt:"Bug Description",placeholder:"Please be as descriptive as possible so we can track it down for you."},{label:"Incorrect Data",prompt:"Problem Description",placeholder:"Please be as descriptive as possible so we can figure it out for you."},{label:"Feature Request",prompt:"Feature Description",placeholder:"Please be as descriptive as possible so we can make your feature awesome."},{label:"Kudos",prompt:"What made you happy?",placeholder:"We love to hear that you're enjoying Encore! Tell us what you like, and what we can do to make it even better"}]),angular.module("encore.ui.utilities").factory("Identity",["$resource",function(a){var b=a("/api/identity/:action",{},{loginWithJSON:{method:"POST",isArray:!1,params:{action:"tokens"}},validate:{method:"GET",url:"/api/identity/login/session/:id",isArray:!1}});return b.login=function(a,c,d){var e={auth:{passwordCredentials:{username:a.username,password:a.password}}};return b.loginWithJSON(e,c,d)},b}]),angular.module("encore.ui.layout",[]),angular.module("encore.ui.metadata",[]),angular.module("encore.ui.utilities").factory("NotifyProperties",["$timeout",function(a){var b={};return b.registrationFn=function(b,c,d){var e=[],f=function(b,c){_.each(e,function(d){a(function(){d(b,c)}),d(b,c)})};return Object.defineProperty(b,c,{get:function(){return b[d]},set:function(a){var c=b[d];b[d]=a,f(a,c)}}),function(a){e.push(a)}},b}]),angular.module("encore.ui.utilities").filter("Page",["PageTracking",function(a){return function(b){b||(b=a.createInstance());var c=[],d=b.pagesToShow||5,e=(d-1)/2,f=Math.ceil(e),g=Math.floor(e);if(b&&0!==b.length){var h=Math.max(Math.min(b.pageNumber-g,b.totalPages-d),0),i=Math.min(Math.max(b.pageNumber+f,d-1),b.totalPages-1);for(h;i>=h;h++)c.push(h)}return c}}]),angular.module("encore.ui.utilities").factory("PageTracking",["$q","LocalStorage","rxPaginateUtils",function(a,b,c){function d(d){function f(a,b,c){var d=Math.floor(c.length/a.itemsPerPage),e=d?_.range(b,b+d):[b];a.cachedPages=_.isEmpty(e)?[b]:e,a.cacheOffset=a.cachedPages[0]*a.itemsPerPage}var g=_.defaults(_.cloneDeep(d),{itemsPerPage:200,persistItemsPerPage:!0,pagesToShow:5,pageNumber:0,pageInit:!1,total:0,showAll:!1,itemSizeList:[50,200,350,500]});g.localItems=[];var h=g.itemsPerPage,i=g.itemSizeList;if(!_.contains(i,h)){var j=_.sortedIndex(i,h);i.splice(j,0,h)}var k=parseInt(b.getItem("rxItemsPerPage"));d.itemsPerPage||_.isNaN(k)||!_.contains(i,k)||(g.itemsPerPage=k),Object.defineProperties(g,{items:{get:function(){var a=c.firstAndLast(g.pageNumber,g.itemsPerPage,g.total);return g.localItems.slice(a.first-g.cacheOffset,a.last-g.cacheOffset)}},totalPages:{get:function(){return Math.ceil(g.total/g.itemsPerPage)}}}),f(g,0,g.localItems);var l=function(b){g.pageNumber=b;var c={items:[],pageNumber:b,totalNumberOfItems:g.total};return a.when(c)};g.updateItemsFn=function(a){l=a},g.newItems=function(a,b){return _.isUndefined(b)&&(b=!0),a.then(function(a){return g.pageNumber=a.pageNumber,g.localItems=a.items,g.total=a.totalNumberOfItems,b&&f(g,g.pageNumber,a.items),a})},g.goToPage=function(b,c){c=c||{};var d=!0;if(!c.forceCacheUpdate&&_.contains(g.cachedPages,b))return d=!1,g.newItems(a.when({pageNumber:b,items:g.localItems,totalNumberOfItems:g.total}),d);var e=c.itemsPerPage||g.itemsPerPage;return g.newItems(l(b,e),d)},g.refresh=function(a){var b=a?g.currentPage():0;return g.goToPage(b,{forceCacheUpdate:!0})},g.isFirstPage=function(){return g.isPage(0)},g.isLastPage=function(){return g.isPage(_.max([0,g.totalPages-1]))},g.isPage=function(a){return g.pageNumber===a},g.isPageNTheLastPage=function(a){return g.totalPages-1===a},g.currentPage=function(){return g.pageNumber},g.goToFirstPage=function(){g.goToPage(0)},g.goToLastPage=function(){g.goToPage(_.max([0,g.totalPages-1]))},g.goToPrevPage=function(){g.goToPage(g.currentPage()-1)},g.goToNextPage=function(){g.goToPage(g.currentPage()+1)},g.isEmpty=function(){return 0===g.total},g.setItemsPerPage=function(a){var b={forceCacheUpdate:!0,itemsPerPage:a};return g.goToPage(0,b).then(function(b){g.itemsPerPage=a,f(g,b.pageNumber,b.items),g.persistItemsPerPage&&e.userSelectedItemsPerPage(a)})},g.isItemsPerPage=function(a){return g.itemsPerPage===a},this.pager=g,g.goToPage(g.pageNumber)}var e={createInstance:function(a){a=a?a:{};var b=new d(a);return b.pager},userSelectedItemsPerPage:function(a){b.setItem("rxItemsPerPage",a)}};return e}]),angular.module("encore.ui.utilities").filter("Paginate",["PageTracking","rxPaginateUtils",function(a,b){return function(c,d){if(d||(d=a.createInstance()),d.showAll)return d.total=c.length,c;if(c){d.total=c.length,d.pageNumber+1>d.totalPages&&(d.isLastPage()||d.goToLastPage());var e=b.firstAndLast(d.currentPage(),d.itemsPerPage,c.length);return c.slice(e.first,e.last)}}}]),angular.module("encore.ui.utilities").filter("PaginatedItemsSummary",["rxPaginateUtils",function(a){return function(b){var c="<%= first %>-<%= last %> of <%= total %>";(b.showAll||b.itemsPerPage>b.total)&&(c="<%= total %>");var d=a.firstAndLast(b.currentPage(),b.itemsPerPage,b.total);return _.template(c,{first:d.first+1,last:d.last,total:b.total})}}]),angular.module("encore.ui.utilities").factory("Permission",["Session",function(a){var b={},c=function(a){return a.split(",").map(function(a){return a.trim()})},d=function(){return _.pluck(b.getRoles(),"name")},e=function(a,b){_.isString(a)&&(a=c(a));var e=d();return b(a,function(a){return _.contains(e,a)})};return b.getRoles=function(){var b=a.getToken();return b&&b.access&&b.access.user&&b.access.user.roles?b.access.user.roles:[]},b.hasRole=function(a){return e(a,_.any)},b.hasAllRoles=function(a){return e(a,_.all)},b}]),angular.module("encore.ui.utilities").provider("routesCdnPath",function(){this.customURL=null,this.$get=function(){var a=this.customURL||"https://5593626d69acc4cdb66a-521ce2b7cdb9308893eabb7915d88c0c.ssl.cf1.rackcdn.com/encoreNav.json",b="https://d5b31243886503cdda55-92f888f8ef3e8464bcb65f52330fcbfb.ssl.cf1.rackcdn.com/encoreNav.json",c="https://b24ad15095637d2f91ee-ae6903de16cd565a74a9a50d287ad33f.ssl.cf1.rackcdn.com/encoreNav.json";return{production:b,staging:a,preprod:c,hasCustomURL:!_.isEmpty(this.customURL)}}}),angular.module("encore.ui.rxAccountInfo",[]),angular.module("encore.ui.rxAccountInfo").directive("rxAccountInfo",["Teams","SupportAccount","Encore","rxNotify","encoreRoutes","AccountStatusGroup",function(a,b,c,d,e,f){return{templateUrl:function(a,b){return"true"===b.accountInfoBanner?"templates/rxAccountInfoBanner.html":"templates/rxAccountInfo.html"},restrict:"E",transclude:!0,scope:{accountNumber:"@",teamId:"@",notifyStack:"@"},link:function(g){var h=g.notifyStack||"page";g.badges=[],g.tooltipHtml=function(a){return['<span class="tooltip-header">',a.name,"</span><p>",a.description,"</p>"].join("")},e.isActiveByKey("cloud").then(function(a){g.showCurrentUser=a}),g.accountPageUrl=_.template("/accounts/<%= accountNumber %>",g),b.getBadges({accountNumber:g.accountNumber},function(a){g.badges=g.badges.concat(a)},function(){d.add("Error retrieving badges for this account",{type:"error",stack:h})});var i=function(b){a.badges({id:b}).$promise.then(function(a){g.badges=g.badges.concat(a)},function(){d.add("Error retrieving badges for this team",{type:"error",stack:h})})};!_.isEmpty(g.teamId)&&_.isNumber(_.parseInt(g.teamId))&&i(g.teamId),c.getAccount({id:g.accountNumber},function(a){if(_.isEmpty(g.teamId)){var b=_.find(a.teams,function(a){return _.contains(a.flags,"primary")});b&&i(b.id)}g.accountName=a.name,g.accountStatus=a.status,g.accountAccessPolicy=a.accessPolicy,g.statusClass="";var c=f(a.status);"warning"===c?g.statusClass="msg-warn":"info"===c&&(g.statusClass="msg-info")},function(){d.add("Error retrieving account name",{type:"error",stack:h})})}}}]),angular.module("encore.ui.rxActionMenu",[]),angular.module("encore.ui.rxActionMenu").directive("rxActionMenu",["$rootScope","$document",function(a,b){return{restrict:"E",transclude:!0,templateUrl:"templates/rxActionMenu.html",scope:{globalDismiss:"=?"},link:function(c,d){_.isBoolean(c.globalDismiss)||(c.globalDismiss=!0),c.displayed=!1,c.toggle=function(){c.displayed=!c.displayed,a.$broadcast("actionMenuShow",d)},c.modalToggle=function(){c.globalDismiss&&c.toggle()},c.$on("actionMenuShow",function(a,b){c.globalDismiss&&b[0]!==d[0]&&(c.displayed=!1)}),b.on("click",function(a){c.globalDismiss&&c.displayed&&!d[0].contains(a.target)&&c.$apply(function(){c.displayed=!1})})}}}]),angular.module("encore.ui.rxActiveUrl",[]),angular.module("encore.ui.rxActiveUrl").directive("rxActiveUrl",["$location",function(a){return{restrict:"E",templateUrl:"templates/rxActiveUrl.html",transclude:!0,replace:!0,scope:{url:"@"},controller:["$scope",function(b){b.isNavActive=function(b){return-1!==a.path().indexOf(b)}}],link:function(a,b,c){a.navActive=a.isNavActive(c.url)}}}]),angular.module("encore.ui.utilities").filter("rxAge",function(){return function(a,b,c){if(!a)return"Unavailable";if("z"===a)return"--";var d=moment(),e=moment(new Date(a)),f=d.diff(e),g=moment.duration(f),h=parseInt(g.asDays(),10),i=parseInt(g.asHours(),10),j=parseInt(g.asMinutes(),10),k=[];_.isBoolean(b)?c=b:_.isBoolean(c)||(c=!1),b=_.isNumber(b)?b:2;var l=[h,i-24*h,j-60*i],m=["d","h","m"];return c&&(m=[" day"," hour"," minute"],_.forEach(m,function(a,b){m[b]+=1!=l[b]?"s":""})),h>0&&k.push({value:h,suffix:m[0]}),i>0&&k.push({value:i-24*h,suffix:m[1]}),k.push({value:j-60*i,suffix:m[2]}),_.map(k.slice(0,b),function(a,b,c){return b==c.length-1?Math.round(a.value)+a.suffix:Math.floor(a.value)+a.suffix}).join(c?", ":" ")}}),angular.module("encore.ui.rxApp",["cfp.hotkeys","encore.ui.utilities","encore.ui.rxEnvironment","encore.ui.rxPermission","ngRoute","ngSanitize"]),angular.module("encore.ui.rxApp").directive("rxAccountSearch",["$window",function(a){return{templateUrl:"templates/rxAccountSearch.html",restrict:"E",link:function(b){b.fetchAccount=function(b){_.isEmpty(b)||(a.location="/search?term="+b)}}}}]),angular.module("encore.ui.rxApp").directive("rxAccountUsers",["$location","$route","Encore","$rootScope","encoreRoutes",function(a,b,c,d,e){return{restrict:"E",templateUrl:"templates/rxAccountUsers.html",link:function(f,g){function h(){var a=function(a){a.users=_.sortBy(a.users,"admin"),f.users=a.users,f.currentUser=b.current.params.user,f.currentUser||e.rebuildUrls({user:a.users[0].username})},d=parseInt(b.current.params.accountNumber,10);d&&c.getAccountUsers({id:d},a)}f.isCloudProduct=!1;var i=function(){e.isActiveByKey("accountLvlTools").then(function(a){a?(h(),e.isActiveByKey("cloud").then(function(a){f.isCloudProduct=a})):f.isCloudProduct=!1})};i(),f.switchUser=function(c){var d=b.current.originalPath.split("/"),e=_.indexOf(d,":user");if(-1!==e){var f=a.url().split("/");f[e]=c,a.url(f.join("/"))}};var j=d.$on("$routeChangeSuccess",i);g.on("$destroy",function(){j()})}}}]),angular.module("encore.ui.rxApp").directive("rxApp",["encoreRoutes","rxAppRoutes","hotkeys","Environment","routesCdnPath","Session",function(a,b,c,d,e,f){return{restrict:"E",transclude:!0,templateUrl:"templates/rxApp.html",scope:{siteTitle:"@?",menu:"=?",collapsibleNav:"@",collapsedNav:"=?",newInstance:"@?",hideFeedback:"@?",logoutUrl:"@?"},link:function(g){g.userId=f.getUserId(),g.isPreProd=d.isPreProd(),g.isLocalNav=e.hasCustomURL&&d.isLocal(),g.isWarning=g.isPreProd||g.isLocalNav,g.isPreProd?g.warningMessage="You are using a pre-production environment that has real, live production data!":g.isLocalNav&&(g.warningMessage="You are using a local nav file. Remove it from your config before committing!");var h=g.newInstance?new b:a;g.newInstance||g.menu?h.setAll(g.menu):g.routes=h.fetchRoutes(),h.getAll().then(function(a){g.routes=a}),g.hideFeedback=!!g.hideFeedback,g.collapsibleNav&&c.add({combo:"h",description:"Show/hide the main menu",callback:function(){g.collapsedNav=!g.collapsedNav}})}}}]),angular.module("encore.ui.rxApp").directive("rxAppNav",function(){return{restrict:"E",replace:!0,templateUrl:"templates/rxAppNav.html",scope:{items:"=",level:"="}}}),angular.module("encore.ui.rxApp").directive("rxAppNavItem",["$compile","$location","$route",function(a,b,c){var d=function(b,c){var d=function(d,e){var f=c[0].querySelector(d);f=angular.element(f),a(e)(b,function(a){f.append(a)})},e="<directive></directive>";angular.isString(b.item.directive)&&(e=e.replace("directive",b.item.directive),d(".item-directive",e));var f=b.$parent.level+1;isNaN(f)&&(f=2);var g='<rx-app-nav items="item.children" level="'+f+'"></rx-app-nav>';angular.isArray(b.item.children)&&d(".item-children",g)};return{restrict:"E",replace:!0,templateUrl:"templates/rxAppNavItem.html",link:d,scope:{item:"="},controller:["$scope","$location","rxVisibility","Permission",function(a,b,d,e){a.route=c;var f=function(a){return _.isUndefined(a)?!0:_.isUndefined(a.any)?_.isUndefined(a.all)?!1:e.hasAllRoles(a.all):e.hasRole(a.any)};a.isVisible=function(c,e){var g={location:b};if(_.isUndefined(c)&&_.isUndefined(e))return!0;if(_.isArray(c)){var h=c[0],i=c[1];_.merge(g,i),c=d.getMethod(h)||"false"}var j=_.isUndefined(c)?!0:a.$eval(c,g),k=!0;return j&&_.isObject(e)&&(k=f(e)),j&&k},a.toggleNav=function(b,c){_.isEmpty(c)&&(b.preventDefault(),a.item.active=!a.item.active)}}]}}]),angular.module("encore.ui.rxApp").directive("rxAppSearch",function(){return{restrict:"E",replace:!0,templateUrl:"templates/rxAppSearch.html",scope:{placeholder:"@?",model:"=?",submit:"=?",pattern:"@?"}}}),angular.module("encore.ui.rxApp").directive("rxAtlasSearch",["$window",function(a){return{template:'<rx-app-search placeholder="Search by username..." submit="searchAccounts"></rx-app-search>',restrict:"E",link:function(b){b.searchAccounts=function(b){_.isEmpty(b)||(a.location="/cloud/"+b+"/servers/")}}}}]),angular.module("encore.ui.rxApp").directive("rxBillingSearch",["$location","$window","encoreRoutes",function(a,b,c){return{templateUrl:"templates/rxBillingSearch.html",restrict:"E",link:function(d){d.searchType="bsl",d.$watch("searchType",function(){d.placeholder="bsl"===d.searchType?"Transaction or Auth ID":"Account or Contact Info"}),d.fetchAccounts=function(e){_.isEmpty(e)||c.isActiveByKey("billing").then(function(c){c?a.url("/search?q="+e+"&type="+d.searchType):b.location="/billing/search?q="+e+"&type="+d.searchType})}}}}]),angular.module("encore.ui.rxApp").directive("rxPage",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/rxPage.html",scope:{title:"=",unsafeHtmlTitle:"=",subtitle:"=",status:"@",accountNumber:"@",teamId:"@"},link:function(a,b){function c(a){_.isString(a.name)&&a.name.match(/^layout/)&&(e.setAttribute(a.name,d.getAttribute(a.name)),d.removeAttribute(a.name))}b.removeAttr("title");for(var d=b[0],e=d.querySelector(".page-content"),f=d.attributes.length;f--;)c(d.attributes[f])},controller:["$scope","rxPageTitle",function(a,b){a.$watch("title",function(){b.setTitle(a.title)}),a.$watch("unsafeHtmlTitle",function(){_.isEmpty(a.unsafeHtmlTitle)||b.setTitleUnsafeStripHTML(a.unsafeHtmlTitle)})}]}}),angular.module("encore.ui.rxApp").directive("rxStatusTag",["rxStatusTags",function(a){return{template:'<span ng-if="status && validKey" class="status-tag {{ class }}">{{ text }}</span>',restrict:"E",scope:{status:"@"},link:function(b){if(b.validKey=a.hasTag(b.status),b.validKey){var c=a.getTag(b.status);b["class"]=c["class"],b.text=c.text}}}}]),angular.module("encore.ui.rxApp").directive("rxTicketSearch",function(){return{template:'<rx-app-search placeholder="Search for a Ticket..." submit="searchTickets"></rx-app-search>',restrict:"E",link:function(a){a.searchTickets=function(){}}}}),angular.module("encore.ui.utilities").factory("rxAppRoutes",["$rootScope","$log","urlUtils","$q",function(a,b,c,d){var e=function(e){e=e||[];var f=c.getCurrentPathChunks(),g=d.defer();e.length>0&&g.resolve(e);var h=function(a,b){return _.each(a,function(a){a.url=c.buildUrl(a.href,b),a.children&&(a.children=h(a.children,b)),a.active=c.isActive(a,f)}),a},i=function(a,c){var d,e=!1;return _.forEach(c,function(c,f){var g=!1;if(c.key===a)d=[f],g=!0;else if("children"in c){var h=i(a,c.children);h&&(d=[f].concat(h),g=!0)}g&&(e?b.warn("Duplicate routes found for key: "+a):e=!0)}),d},j=function(a,b,c,d){var e=c[a[0]];return d<a.length-1?e.children=j(a.slice(1),b,e.children,d+1):_.assign(e,b),c},k=function(a,b){var c,d,e=a.length;for(c=0;e>c;c++)d=b[a[c]],b=d.children;return d};return a.$on("$locationChangeSuccess",function(){f=c.getCurrentPathChunks(),e=h(e)}),{getIndexByKey:function(a){return g.promise.then(function(){var c=i(a,e);return _.isUndefined(c)?(b.debug("Could not find route by key: ",a),d.reject()):c})},getRouteByKey:function(a){return this.getIndexByKey(a).then(function(a){return k(a,e)},function(){return d.reject()})},isActiveByKey:function(a){return this.getRouteByKey(a).then(function(a){return c.isActive(a,c.getCurrentPathChunks())},function(){return d.reject()})},setRouteByKey:function(a,b){return this.getIndexByKey(a).then(function(a){return e=j(a,b,e,0),e=h(e),a},function(){return d.reject()})},getAll:function(){return g.promise.then(function(){return e})},setAll:function(a){var b=_.clone(a,!0);e=h(b),g.resolve()},rebuildUrls:function(a){h(e,a)}}};return e}]),angular.module("encore.ui.rxAttributes",[]),angular.module("encore.ui.rxAttributes").directive("rxAttributes",["$parse","$compile",function(a,b){return{restrict:"A",terminal:!0,priority:1e3,compile:function(c,d){return{pre:function(c,e){var f=a(d.rxAttributes)(c);_.forIn(f,function(a,b){_.isUndefined(a)||e.attr(b,a)}),e.removeAttr("rx-attributes"),e.removeAttr("data-rx-attributes"),b(e)(c)}}}}}]),angular.module("encore.ui.utilities").factory("rxAutoSave",["$location","$q","debounce","rxLocalStorage",function(a,b,c,d){var e=1,f=function(b,c,e){this.key=e("rxAutoSave::"+a.url()),this.watchVar=b,this.storage=c?c:d};return f.prototype.getAll=function(){return this.storage.getObject(this.key)||{pageConfig:{version:e},forms:{}}},f.prototype.getForm=function(){var a=this.getAll();return _.has(a.forms,this.watchVar)||(a.forms[this.watchVar]={data:{},config:{expires:0}}),a.forms[this.watchVar]},f.prototype.setForm=function(a){var b=this.getAll();b.forms[this.watchVar]=a,this.storage.setObject(this.key,b)},f.prototype.getConfig=function(){return this.getForm().config},f.prototype.getExpires=function(){return this.getConfig().expires},f.prototype.setExpiryTime=function(a){var b=this.getForm();b.config.expires=a,this.setForm(b)},f.prototype.expire=function(){var a=this.getForm();a.data={},a.config.expires=0,this.setForm(a)},f.prototype.getDataObject=function(){return this.getForm().data||{}},f.prototype.setDataObject=function(a){var b=this.getForm();b.data=a,this.setForm(b)},function(a,e,g){function h(a){var b=i.getDataObject();_.assign(b,_.omit(a,g.exclude)),i.setDataObject(b),j()}g=g||{},_.defaults(g,{load:!0,save:!0,clearOnSuccess:void 0,exclude:[],ttl:172800,keyShaping:_.identity,storageBackend:d}),g.ttl=1e3*g.ttl;var i=new f(e,g.storageBackend,g.keyShaping),j=function(){g.ttl>0&&i.setExpiryTime(_.now()+g.ttl)},k=function(){var b=i.getExpires();if(b>0&&b<=_.now())return void i.expire();j();var c=i.getDataObject();_.assign(a[e],_.omit(c,g.exclude))},l={clear:function(){i.expire()},clearOnSuccess:function(a){a.then(this.clear)},save:function(){h(a[e])},getStoredValue:function(){return i.getDataObject()}};_.bindAll(l);var m=c(h,1e3);return b.when(g.save).then(function(b){b&&a.$watch(e,m,!0)}),b.when(g.load).then(function(a){a&&k()}),_.isUndefined(g.clearOnSuccess)||l.clearOnSuccess(g.clearOnSuccess),l}}]),angular.module("encore.ui.rxBreadcrumbs",["ngSanitize"]),angular.module("encore.ui.rxBreadcrumbs").directive("rxBreadcrumbs",function(){return{restrict:"E",templateUrl:"templates/rxBreadcrumbs.html",controller:["$scope","rxBreadcrumbsSvc",function(a,b){a.breadcrumbs=b}],scope:{status:"@"}}}),angular.module("encore.ui.utilities").factory("rxBreadcrumbsSvc",function(){var a=[{path:"/",name:"Home"}],b={};return b.set=function(b){a=a.splice(0,1),a=a.concat(b)},b.getAll=function(b){var c=a.slice(0);return _.isString(b)&&b&&_.each(c,function(a){a.usePageStatusTag&&!a.status&&(a.status=b)}),c},b.setHome=function(b,c){a[0]={path:b,name:c||a[0].name}},b}),angular.module("encore.ui.rxBulkSelect",["encore.ui.utilities","encore.ui.atoms"]),angular.module("encore.ui.rxBulkSelect").directive("rxBatchActions",["rxDOMHelper",function(a){return{restrict:"E",require:["^rxBulkSelect","?^rxFloatingHeader"],templateUrl:"templates/rxBatchActions.html",transclude:!0,link:function(b,c,d,e){var f=e[0],g=e[1];c.parent().parent().addClass("rx-table-filter-row"),b.displayed=!1,b.toggleBulkActions=function(){b.displayed=!b.displayed};var h=function(a){b.rowsSelected=a>0,0===a&&(b.displayed=!1)};f.registerForNumSelected(h),_.isObject(g)&&(b.displayed||a.find(c,".batch-action-menu-container").addClass("ng-hide"),g.update())}}}]),angular.module("encore.ui.rxBulkSelect").directive("rxBulkSelect",function(){var a="<tr rx-bulk-select-message></tr>";return{restrict:"A",scope:{bulkSource:"=",selectedKey:"@"},compile:function(b,c){var d=b.find("thead").eq(0),e=angular.element(a);return e.attr("resource-name",c.resourceName||c.bulkSource.replace(/s$/,"")),d.append(e),function(a,b){a.tableElement=b}},controller:"rxBulkSelectController"}}),angular.module("encore.ui.rxBulkSelect").directive("rxBulkSelectHeaderCheck",["$compile",function(a){var b='<input ng-model="allSelected" ng-change="selectAll()" rx-checkbox>';return{restrict:"A",scope:!0,require:"^rxBulkSelect",link:function(c,d,e,f){c.allSelected=!1,c.selectAll=function(){c.allSelected?f.selectAllVisibleRows():f.deselectAllVisibleRows()},d.append(a(b)(c).parent());var g=function(){var a=f.messageStats;c.allSelected=a.numSelected===a.total};f.registerForNumSelected(g),f.registerForTotal(g);var h=function(){c.allSelected=!1};f.registerHeader(h)}}}]),angular.module("encore.ui.rxBulkSelect").directive("rxBulkSelectMessage",function(){return{restrict:"A",require:["^rxBulkSelect","?^rxFloatingHeader"],scope:{resourceName:"@"},templateUrl:"templates/rxBulkSelectMessage.html",link:function(a,b,c,d){b.addClass("ng-hide");var e=d[0],f=d[1]||{update:function(){}};a.selectAll=function(){e.selectEverything()},a.deselectAll=function(){e.deselectEverything()},a.numSelected=0,a.total=e.messageStats.total;var g=function(c,d){a.numSelected=c;var e=c>1;a.plural=e?"s":"",a.isOrAre=e?"are":"is",0===c?(b.addClass("ng-hide"),f.update()):c>0&&0===d&&(b.removeClass("ng-hide"),f.update())};e.registerForNumSelected(g),e.registerForTotal(function(b){a.total=b}),f.update()}}}),angular.module("encore.ui.rxBulkSelect").directive("rxBulkSelectRow",function(){return{restrict:"A",scope:{row:"="},require:"^rxBulkSelect",template:'<input ng-change="onChange()" ng-model="row[key]" rx-checkbox class="rx-bulk-select-row" />',link:function(a,b,c,d){a.key=d.key(),a.onChange=function(){a.row[a.key]?d.increment():d.decrement()}}}}),angular.module("encore.ui.rxBulkSelect").directive("rxBulkSelectValidate",function(){return{require:["^form","rxBulkSelect"],restrict:"A",link:function(a,b,c,d){var e=d[0],f=d[1],g=function(){var a=f.messageStats;e.$setValidity("selected",a.numSelected>0)};f.registerForNumSelected(g),e.$setValidity("selected",!1)}}}),angular.module("encore.ui.utilities").controller("rxBulkSelectController",["$scope","NotifyProperties","rxBulkSelectUtils",function(a,b,c){a.showMessage=!1;var d=_.noop,e={_numSelected:0,_total:0};this.registerForNumSelected=b.registrationFn(e,"numSelected","_numSelected"),this.registerForTotal=b.registrationFn(e,"total","_total"),this.messageStats=e;var f=function(){var b=_.where(a.bulkSource,a.selectedKey);return b.length},g=function(){e.numSelected=f(),e.total=a.bulkSource.length};this.key=function(){return a.selectedKey};var h=function(b){c.setAllVisibleRows(b,a.tableElement,a.selectedKey)},i=function(b){_.each(a.bulkSource,function(c){c[a.selectedKey]=b})};this.selectAllVisibleRows=function(){h(!0),g()},this.deselectAllVisibleRows=function(){h(!1),g(),d()},this.selectEverything=function(){i(!0),g()},this.deselectEverything=function(){i(!1),g(),d()},a.$watch("bulkSource.length",function(a){a!==e.total&&g()}),this.increment=function(){e.numSelected+=1},this.decrement=function(){e.numSelected-=1},this.registerHeader=function(a){_.isFunction(a)&&(d=a)}}]),angular.module("encore.ui.utilities").factory("rxBulkSelectUtils",function(){var a={},b=function(a){return _.map(a[0].querySelectorAll("td .rx-bulk-select-row"),angular.element)};return a.setAllVisibleRows=function(a,c,d){_.each(b(c),function(b){b.scope().row[d]=a})},a}),angular.module("encore.ui.atoms").directive("rxButton",function(){return{templateUrl:"templates/rxButton.html",restrict:"E",scope:{toggleMsg:"@",defaultMsg:"@",toggle:"=",disable:"=?",classes:"@?"}}}),angular.module("encore.ui.utilities").filter("rxCapitalize",function(){return function(a){return _.isString(a)?a.charAt(0).toUpperCase()+a.slice(1):""}}),angular.module("encore.ui.rxCharacterCount",[]),angular.module("encore.ui.rxCharacterCount").directive("rxCharacterCount",["$compile",function(a){var b='<div class="character-countdown" ',c="ng-class=\"{ 'near-limit': nearLimit, 'over-limit': overLimit }\">{{ remaining }}</div>",d='<div class="input-highlighting" ',e='><span>{{ underLimitText }}</span><span class="over-limit-text">{{ overLimitText }}</span></div>',f=function(a){var b="";return _.has(a,"ngShow")&&(b+='ng-show="'+a.ngShow+'" '),_.has(a,"ngHide")&&(b+='ng-hide="'+a.ngHide+'" '),b},g=function(a){return b+f(a)+c},h=function(a){return d+f(a)+e};return{restrict:"A",require:"ngModel",scope:!0,link:function(b,c,d,e){function f(a,b){return b||(b={}),a.search(b.fromEnd?/\s*$/:/\S/)}function i(){var a=c.val(),e=k,g=a.length;d.ngTrim&&"false"===d.ngTrim||(e+=f(a),g=f(a,{fromEnd:!0})),b.underLimitText=a.slice(0,e),b.overLimitText=a.slice(e,g),
b.$apply()}var j=angular.element('<div class="counted-input-wrapper" />');c.after(j),a(g(d))(b,function(a){j.append(c),j.append(a)});var k=_.parseInt(d.maxCharacters)||254,l=_.parseInt(d.lowBoundary)||10;b.remaining=k,b.nearLimit=!1,b.overLimit=!1,b.$watch(function(){return e.$modelValue},function(a){"string"==typeof a&&(b.remaining=k-a.length,b.nearLimit=b.remaining>=0&&b.remaining<l,b.overLimit=b.remaining<0)}),"true"===d.highlight&&(a(h(d))(b,function(a){j.prepend(a)}),c.on("input",i)),b.$on("$destroy",function(){c.off("input",i),j.remove()})}}}]),angular.module("encore.ui.atoms").directive("rxCheckbox",function(){return{restrict:"A",scope:{ngDisabled:"=?"},compile:function(a,b){return a.attr("type","checkbox"),b.type="checkbox",function(a,b,c){var d="rx-disabled",e='<div class="rxCheckbox"></div>',f='<div class="fake-checkbox"><div class="tick fa fa-check"></div></div>';b.wrap(e),b.after(f);var g=b.parent();c.disabled&&g.addClass(d),_.has(c,"ngDisabled")&&a.$watch("ngDisabled",function(a){a===!0?g.addClass(d):g.removeClass(d)});var h=function(){g.remove()};b.on("$destroy",function(){a.$evalAsync(h)})}}}}),angular.module("encore.ui.rxCollapse",[]),angular.module("encore.ui.rxCollapse").directive("rxCollapse",function(){return{restrict:"E",templateUrl:"templates/rxCollapse.html",transclude:!0,scope:{title:"@"},link:function(a,b,c){a.isExpanded="false"!==c.expanded,a.toggleExpanded=function(){a.isExpanded=!a.isExpanded}}}}),angular.module("encore.ui.rxCompile",[]),angular.module("encore.ui.rxCompile").directive("rxCompile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.rxCompile)},function(d){c.html(d),a(c.contents())(b)})}}]),angular.module("encore.ui.molecules").directive("rxDatePicker",function(){return{templateUrl:"templates/rxDatePicker.html",restrict:"E",require:"ngModel",scope:{selected:"=ngModel"},link:function(a,b,c,d){function e(a){for(var b,c,d=a.clone().startOf("day"),e=d.month(),f=[];d.month()===e;)f.push(d.clone()),d.add(1,"day");for(;_.first(f).day()>0;)b=_.first(f).clone(),f.unshift(b.subtract(1,"day"));for(;_.last(f).day()<6;)c=_.last(f).clone(),f.push(c.add(1,"day"));return f}var f=moment(new Date),g="YYYY-MM-DD";a.calendarVisible=!1,a.calendarMonth=f.clone().startOf("month"),a.toggleCalendar=function(){_.isUndefined(c.disabled)&&(a.calendarVisible=!a.calendarVisible)},a.navigate=function(b){var c=a.calendarMonth.clone();switch(b){case"nextMonth":c.add(1,"month");break;case"prevMonth":c.subtract(1,"month")}a.calendarMonth=c},a.selectDate=function(b){a.selected=b.format(g),a.calendarVisible=!1},a.isToday=function(a){return moment(a).isSame(f,"day")},a.isMonth=function(b){return moment(b).isSame(a.calendarMonth,"month")},a.isSelected=function(b){return _.isUndefined(a.selected)?!1:moment(b).isSame(a.selected,"day")},a.$watch("selected",function(b){if(!_.isEmpty(b)){var c=moment(b,g);c.isValid()&&(a.calendarMonth=c.startOf("month"))}}),a.$watch("calendarMonth",function(b){a.calendarDays=e(b)}),d.$formatters.push(function(a){var b=moment(a,g);return d.$setValidity("date",b.isValid()),b.isValid()?b.format("MMMM DD, YYYY"):null}),d.$render=function(){a.displayValue=d.$viewValue}}}}),angular.module("encore.ui.utilities").filter("rxDiskSize",function(){return function(a,b){var c=["GB","TB","PB"],d=_.indexOf(c,b);return-1===d&&(a>0?d=Math.floor(Math.log(a)/Math.log(1e3)):(d=0,a=0)),a/Math.pow(1e3,Math.floor(d)).toFixed(1)+" "+c[d]}}),angular.module("encore.ui.utilities").factory("rxDOMHelper",["$document","$window",function(a,b){var c=function(){var c=a[0],d=b.pageYOffset||c.body.scrollTop||c.documentElement.scrollTop||0;return d},d=function(d){var e=d[0],f=0,g=0,h=a[0],i=h.documentElement||h.body,j=b.pageXOffset||i.scrollLeft,k=c(),l=e.getBoundingClientRect();return f=l.left+j,g=l.top+k,{left:f,top:g}},e=function(a){return a instanceof angular.element&&(a=a[0]),b.getComputedStyle(a)},f=function(a){return e(a).width},g=function(a){return e(a).height},h=function(a,b){var e=d(a),f=c();return f>e.top&&f<e.top+b},i=function(a,b){var c=-1!==["SELECT","FORM"].indexOf(b.tagName),d=b.length&&!c?b[0]:b,e=d.parentNode,f=d.nextSibling;if(a.appendChild(d),!c)for(;b.length;)a.appendChild(b[0]);f?e.insertBefore(a,f):e.appendChild(a)},j=function(a){angular.element(b).bind("scroll",a)},k=function(a,b){return angular.element(a[0].querySelector(b))};return{offset:d,scrollTop:c,width:f,height:g,shouldFloat:h,onscroll:j,find:k,wrapAll:i}}]),angular.module("encore.ui.rxEnvironment",["ngSanitize","encore.ui.utilities"]),angular.module("encore.ui.rxEnvironment").directive("rxIfEnvironment",["$compile",function(a){return{restrict:"A",terminal:!0,priority:1e3,compile:function(){return{pre:function(b,c,d){c.attr("ng-show","'"+d.rxIfEnvironment+"'| rxEnvironmentMatch"),c.removeAttr("rx-if-environment"),c.removeAttr("data-rx-if-environment"),a(c)(b)}}}}}]),angular.module("encore.ui.utilities").filter("rxEnvironmentMatch",["Environment",function(a){return function(b){var c="!"===b[0],d=c?b.substr(1):b,e=a.envCheck(d);return c?!e:e}}]),angular.module("encore.ui.utilities").filter("rxEnvironmentUrl",["Environment","$interpolate",function(a,b){return function(c){var d=a.get();return _.isObject(c)?b(d.url)(c):c}}]),angular.module("encore.ui.atoms").directive("rxFavicon",["Environment","$parse","$log",function(a,b,c){return{restrict:"A",replace:!0,link:function(d,e,f){var g=b(f.rxFavicon)(d);if(!_.isObject(g))return c.warn("rxFavicon: An object must be passed in to this attribute"),!1;g.prod=e.attr("href"),g.staging=g.staging||g.prod,g.local=g.local||g.staging;var h={local:"local","unified-preprod":"staging",ghPages:"prod","unified-prod":"prod"};d.$watch(function(){return a.get()},function(a){var b=h[a.name];e.attr("href",g[b])})}}}]),angular.module("encore.ui.rxFeedback",["ngResource","encore.ui.utilities"]),angular.module("encore.ui.rxFeedback").directive("rxFeedback",["feedbackTypes","$location","rxFeedbackSvc","rxScreenshotSvc","rxNotify","Session",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"templates/rxFeedback.html",scope:{sendFeedback:"=?onSubmit"},link:function(g){g.feedbackTypes=a,g.setCurrentUrl=function(a){a.currentUrl=b.url()};var h=function(a){var b=_.isString(a.message)?a.message:"Thanks for your feedback!";e.add(b,{type:"success"})},i=function(a){var b="An error occurred submitting your feedback";a.data&&_.isString(a.data.message)&&(b+=": "+a.data.message),e.add(b,{type:"error"})},j=function(a,b){c.api.save({type:a.type.label,description:a.description,screenshot:b,sso:a.sso},h,function(b){i(b),c.fallback(a)})};_.isFunction(g.sendFeedback)||(g.sendFeedback=function(a){a.sso=f.getUserId();var b=document.querySelector(".rx-app"),c=d.capture(b);c.then(function(b){j(a,b)},function(b){j(a,b)})})}}}]),angular.module("encore.ui.utilities").controller("rxFeedbackController",["$scope","$modalInstance","$rootScope","$injector",function(a,b,c,d){a.submit=function(){b.close(a)},a.cancel=b.dismiss,c.$on("$routeChangeSuccess",b.dismiss),d.has("FeedbackService")&&d.get("FeedbackService").initialize(a,b)}]),angular.module("encore.ui.utilities").factory("rxFeedbackSvc",["$resource","feedbackApi","$location","$window",function(a,b,c,d){var e={api:void 0,email:"encoreui@lists.rackspace.com"};return e.setEndpoint=function(b){e.api=a(b)},e.setEndpoint(b),e.fallback=function(a){var b="Encore Feedback: "+a.type.label,f=["Current Page: "+c.absUrl(),"Browser User Agent: "+navigator.userAgent,"Comments: "+a.description];f=f.join("\n\n");var g=encodeURI("mailto:"+e.email+"?subject="+b+"&body="+f),h=d.open(g,"_blank");h||(d.location.href=g)},e}]),angular.module("encore.ui.rxFloatingHeader",["encore.ui.rxMisc"]),angular.module("encore.ui.rxFloatingHeader").directive("rxFloatingHeader",["$document","rxDOMHelper",function(a,b){return{restrict:"A",controller:["$scope",function(a){this.update=function(){_.isFunction(a.update)&&a.update()}}],link:function(c,d){var e,f,g,h,i,j,k,l,m,n,o=function(){i&&i.length&&_.each(i,function(a){a.remove()}),e="fixed",f=!1,g=[],h=[],m=[],n=0,i=[],j=[],l=angular.element(d.find("thead"));var a=!1;_.each(l.find("tr"),function(c){c=angular.element(c),!a&&c.hasClass("rx-floating-header")&&(a=!0);var d=c.clone();i.push(d),a&&d.removeClass("rx-floating-header"),a&&l.append(d),g.push(c);var e=_.map(c.find("th"),angular.element);if(h=h.concat(e),1===e.length){var f=e[0],j=b.width(f);if("auto"!==j){var k=_.parseInt(j);k>n&&(n=k)}m.push([f,angular.element(d.find("th"))])}}),n=n.toString()+"px",_.each(m,function(a){a[0].css({width:n}),a[1].css({width:n})}),_.each(h,function(a){var b=a.find("input");if(b.length){var c=b.attr("type");c&&"text"!==c||(a.addClass("filter-header"),b.addClass("filter-box"),j.push(b))}})};o(),c.updateHeaders=function(){if(_.isUndefined(k)&&(k=d[0].offsetHeight),k=_.max([k,d[0].offsetHeight]),b.shouldFloat(d,k)){if("fixed"===e){e="float";var c=[],m=[];_.each(g,function(a){m.push(parseInt(b.height(a)))}),c=_.map(h,b.width),_.each(i,function(a){l.append(a)});var n=0;_.each(g,function(a,b){a.addClass("rx-floating-header"),a.css({top:n.toString()+"px"}),n+=m[b]}),_.each(_.zip(h,c),function(a){var b=a[0],c=a[1];b.css({width:c})})}}else"float"!==e&&f||(e="fixed",f=!0,_.each(j,function(b){a[0].activeElement===b[0]&&b[0].blur()}),_.each(g,function(a){a.removeClass("rx-floating-header")}),_.each(i,function(a){a.remove()}))},b.onscroll(function(){c.updateHeaders()}),c.update=function(){o()}}}}]),angular.module("encore.ui.rxForm",["ngSanitize","encore.ui.rxMisc"]),angular.module("encore.ui.rxForm").directive("rxField",["rxNestedElement",function(a){return a({parent:"rxFormSection"})}]),angular.module("encore.ui.rxForm").directive("rxFieldContent",["rxNestedElement",function(a){return a({parent:"rxField"})}]),angular.module("encore.ui.rxForm").directive("rxFieldName",["rxNestedElement",function(a){return a({parent:"rxField",transclude:!0,scope:{ngRequired:"=?"},templateUrl:"templates/rxFieldName.html"})}]),angular.module("encore.ui.rxForm").directive("rxForm",["rxNestedElement",function(a){return a({restrict:"A"})}]),angular.module("encore.ui.rxForm").directive("rxFormFieldset",function(){var a="DEPRECATION WARNING: rxFormFieldset has been marked as deprecated and will be removed in a future release of the EncoreUI framework. Please see current rxForm documentation for updated functionality.";return console.warn(a),{restrict:"E",templateUrl:"templates/rxFormFieldset.html",transclude:!0,scope:{legend:"@",description:"@"}}}),angular.module("encore.ui.rxForm").directive("rxFormItem",["$document","rxDOMHelper",function(a,b){var c="DEPRECATION WARNING: rxFormItem has been marked as deprecated and will be removed in a future release of the EncoreUI framework. Please see current rxForm documentation for updated functionality.";return console.warn(c),{restrict:"E",templateUrl:"templates/rxFormItem.html",transclude:!0,scope:{label:"@",suffix:"@",prefix:"@",description:"@"},link:function(c,d){var e=[".field-input-wrapper input",".field-input-wrapper select",".field-input-wrapper textarea"];e=e.join(", ");var f=function(){var f="field-"+c.$id,g=d[0].querySelector(e);if(c.isTextArea=_.isObject(g)&&"textarea"===g.type,_.isObject(g)){if(c.suffix){var h=a[0].createElement("span");h.innerHTML=c.suffix,h.className="field-suffix",g.parentNode.insertBefore(h,g.nextSibling)}var i=a[0].createElement("span");i.className="field-input",b.wrapAll(i,g);var j=g.getAttribute("id");_.isString(j)?f=j:g.setAttribute("id",f),d[0].querySelector(".field-label").setAttribute("for",f)}};f()}}}]),angular.module("encore.ui.rxForm").directive("rxFormSection",["rxNestedElement",function(a){return a({parent:"rxForm"})}]),angular.module("encore.ui.rxForm").directive("rxHelpText",function(){return{restrict:"E"}}),angular.module("encore.ui.rxForm").directive("rxInfix",["rxNestedElement",function(a){return a({parent:"rxInput"})}]),angular.module("encore.ui.rxForm").directive("rxInlineError",function(){return{restrict:"E"}}),angular.module("encore.ui.rxForm").directive("rxInput",["rxNestedElement",function(a){return a({parent:"rxFieldContent"})}]),angular.module("encore.ui.rxForm").directive("rxPrefix",["rxNestedElement",function(a){return a({parent:"rxInput"})}]),angular.module("encore.ui.rxForm").directive("rxSuffix",["rxNestedElement",function(a){return a({parent:"rxInput"})}]),angular.module("encore.ui.utilities").factory("rxFormUtils",["$document",function(a){var b={};return b.getSelectedOptionForTable=function(b){var c,d=a[0].querySelector("rx-form-option-table#"+b+" .selected input");return _.isObject(d)&&"value"in d&&(c={rowId:d.value}),c},b.getSelectedOptionForTabSet=function(c){var d,e='//div[@id="'+c+'"]//tr[contains(@class, "selected")]//ancestor::rx-form-option-table',f=a[0].evaluate(e,a[0],null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(f.singleNodeValue){var g=f.singleNodeValue,h=g.getAttribute("field-id"),i=b.getSelectedOptionForTable(g.id).rowId;d={tableId:g.id,fieldId:h,rowId:i}}return d},b}]),angular.module("encore.ui.utilities").factory("rxHideIfUkAccount",["$routeParams",function(a){var b={name:"rxHideIfUkAccount",method:function(){return a.accountNumber<1e7}};return b}]),angular.module("encore.ui.rxInfoPanel",[]),angular.module("encore.ui.rxInfoPanel").directive("rxInfoPanel",function(){return{templateUrl:"templates/rxInfoPanel.html",restrict:"E",transclude:!0,scope:{panelTitle:"@"}}}),angular.module("encore.ui.utilities").service("LocalStorage",["rxLocalStorage",function(a){return a}]),angular.module("encore.ui.utilities").service("rxLocalStorage",["$window",function(a){this.setItem=function(b,c){a.localStorage.setItem(b,c)},this.getItem=function(b){return a.localStorage.getItem(b)},this.key=function(b){return a.localStorage.key(b)},this.removeItem=function(b){a.localStorage.removeItem(b)},this.clear=function(){a.localStorage.clear()},this.__defineGetter__("length",function(){return a.localStorage.length}),this.setObject=function(a,b){var c=_.isObject(b)||_.isArray(b)?JSON.stringify(b):b;this.setItem(a,c)},this.getObject=function(b){var c=a.localStorage.getItem(b);try{c=JSON.parse(c)}catch(d){return c}return c}}]),angular.module("encore.ui.rxLogout",["encore.ui.utilities"]),angular.module("encore.ui.rxLogout").directive("rxLogout",["Auth","$window","$location",function(a,b,c){return{restrict:"A",scope:{rxLogout:"@"},link:function(d,e){d.logoutUrl=_.isString(d.rxLogout)&&d.rxLogout.length>0?d.rxLogout:"/login",e.on("click",function(){a.logout(),c.$$html5||(d.logoutUrl="#"+d.logoutUrl),b.location=d.logoutUrl})}}}]),angular.module("encore.ui.rxMetadata",[]),angular.module("encore.ui.rxMetadata").directive("rxMeta",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/rxMeta.html",scope:{label:"@"}}}),angular.module("encore.ui.rxMetadata").directive("rxMetadata",function(){return{restrict:"E"}}),angular.module("encore.ui.rxMisc",["debounce","encore.ui.utilities"]),angular.module("encore.ui.rxModalAction",["ui.bootstrap"]).run(["$compile","$templateCache",function(a,b){a(b.get("templates/rxModalFooters.html"))}]),angular.module("encore.ui.rxModalAction").directive("rxModalAction",["$modal",function(a){var b=function(b,c){b=_.defaults(b,{templateUrl:b.templateUrl,controller:"rxModalCtrl",scope:c}),b.windowClass="rxModal";var d=a.open(b);return d};return{transclude:!0,templateUrl:"templates/rxModalAction.html",restrict:"E",scope:!0,link:function(a,c,d){a.isDisabled=!1,a.classes=d.classes,d.$observe("disabled",function(b){a.isDisabled=a.$eval(b)});var e=function(){c.find("a")[0].focus()},f=function(){e(),a.$eval(d.dismissHook)},g=function(){e(),a.$eval(d.postHook)};a.showModal=function(c){if(c.preventDefault(),a.isDisabled)return!1;a.fields={},a.setState=function(b){a.state=b},a.setState("editing"),a.$eval(d.preHook),_.has(d,"disableEsc")&&(d.keyboard=!1);var e=b(d,a);e.result.then(g,f)}}}}]),angular.module("encore.ui.rxModalAction").directive("rxModalFooter",["rxModalFooterTemplates",function(a){return{restrict:"E",compile:function(b,c){var d=angular.element("<div></div>").append(b.html()).attr("ng-switch-when",c.state);return a.add(c.state,d[0].outerHTML,{global:void 0!==c.global}),function(a,b){b.remove()}}}}]),angular.module("encore.ui.rxModalAction").directive("rxModalForm",["$timeout","$compile","rxModalFooterTemplates",function(a,b,c){return{transclude:!0,templateUrl:"templates/rxModalActionForm.html",restrict:"E",scope:{title:"@",subtitle:"@?",isLoading:"=?",submitText:"@?",cancelText:"@?",returnText:"@?",defaultFocus:"@?"},link:function(d,e){_.assign(d.$parent,_.pick(d,["submitText","cancelText","returnText"])),b(c.flush())(d.$parent,function(a){e.children("div.modal-footer").append(a)});var f={cancel:"button.cancel",submit:"button.submit",firstTabbable:'input:not([type="hidden"]):not([disabled="disabled"]), textarea, select'},g=function(a){var b,c;"cancel"===a||"submit"===a?(b=e[0].querySelector(".modal-footer"),c=b.querySelector(f[a])):(a="firstTabbable",b=e[0].querySelector(".modal-form"),c=b.querySelector("[autofocus]"),c||(c=b.querySelector(f[a]))),c&&c.focus()};a(function(){g(d.defaultFocus)},400),e.removeAttr("title")}}}]),angular.module("encore.ui.utilities").controller("rxModalCtrl",["$scope","$modalInstance","$rootScope",function(a,b,c){a.submit=function(){b.close(a)},a.cancel=b.dismiss,c.$on("$routeChangeSuccess",b.dismiss)}]),angular.module("encore.ui.utilities").factory("rxModalFooterTemplates",function(){var a={},b={};return{flush:function(){var c=_.assign({},a,b);return b={},_.values(c).reduce(function(a,b){return a+b},'<div ng-switch="state">')+"</div>"},add:function(c,d,e){e.global?a[c]=d:b[c]=d}}}),angular.module("encore.ui.rxMultiSelect",["encore.ui.utilities"]),angular.module("encore.ui.rxMultiSelect").directive("rxMultiSelect",["$document","rxDOMHelper",function(a,b){return{restrict:"E",templateUrl:"templates/rxMultiSelect.html",transclude:!0,require:["rxMultiSelect","ngModel"],scope:{selected:"=ngModel",options:"=?",isDisabled:"=ngDisabled"},controller:["$scope",function(a){_.isUndefined(a.selected)&&(a.selected=[]),this.options=[],this.addOption=function(a){"all"!==a&&(this.options=_.union(this.options,[a]),this.render())},this.removeOption=function(a){"all"!==a&&(this.options=_.without(this.options,a),this.unselect(a),this.render())},this.select=function(b){a.selected="all"===b?_.clone(this.options):_.union(a.selected,[b])},this.unselect=function(b){a.selected="all"===b?[]:_.without(a.selected,b)},this.isSelected=function(b){return"all"===b?this.options.length===a.selected.length:_.contains(a.selected,b)},this.render=function(){this.ngModelCtrl&&this.ngModelCtrl.$render()}}],link:function(a,c,d,e){a.listDisplayed=!1,a.toggleMenu=function(){a.isDisabled||(a.listDisplayed=!a.listDisplayed)},a.closeMenu=function(){a.listDisplayed=!1};var f=e[0],g=e[1];g.$render=function(){a.$evalAsync(function(){a.preview=function(){function d(a){var d=b.find(c,'[value="'+a+'"]');return d.text().trim()}if(_.isEmpty(a.selected))return"None";if(1===a.selected.length)return d(a.selected[0])||a.selected[0];if(a.selected.length===f.options.length-1){var e=_.first(_.difference(f.options,a.selected));return"All except "+d(e)||a.selected[0]}return a.selected.length===f.options.length?"All Selected":a.selected.length+" Selected"}()})},f.ngModelCtrl=g}}}]),angular.module("encore.ui.rxMultiSelect").directive("rxSelectOption",["rxDOMHelper",function(a){return{restrict:"E",templateUrl:"templates/rxSelectOption.html",transclude:!0,scope:{value:"@"},require:"^^rxMultiSelect",link:function(b,c,d,e){b.transclusion=a.find(c,"[ng-transclude] > *").length>0,b.toggle=function(){b.isSelected?e.unselect(b.value):e.select(b.value)},b.$watch(function(){return e.isSelected(b.value)},function(a){b.isSelected=a}),e.addOption(b.value),b.$on("$destroy",function(){e.removeOption(b.value)})}}}]),angular.module("encore.ui.utilities").factory("rxNestedElement",function(){return function(a){a=a||{};var b={restrict:"E",controller:angular.noop};return angular.isDefined(a.parent)&&(a.require="^"+a.parent,a.link=function(){}),_.defaults(a,b)}}),angular.module("encore.ui.rxNotify",["ngSanitize","ngAnimate","encore.ui.utilities"]),angular.module("encore.ui.rxNotify").directive("rxNotification",["rxNotify",function(a){return{scope:{type:"@"},transclude:!0,restrict:"E",templateUrl:"templates/rxNotification.html",link:{pre:function(b,c,d,e,f){if(!_.isEmpty(d.stack)){var g=f().parent().html();a.add(g,{type:d.type,stack:d.stack}),c.remove()}}}}}]),angular.module("encore.ui.rxNotify").directive("rxNotifications",["rxNotify",function(a){return{scope:{stack:"@?"},restrict:"E",replace:!0,templateUrl:"templates/rxNotifications.html",controller:["$scope",function(b){b.dismiss=function(b){a.dismiss(b)}}],link:function(b){var c=b.stack||"page";b.$watch(function(){return a.stacks[c]},function(a){b.messages=a}),b.loading=!0}}}]),angular.module("encore.ui.utilities").service("rxNotify",["$interval","$rootScope",function(a,b){function c(b){var c=1e3*b.timeout;a(function(){d(b)},c,1)}function d(b){f[b.stack]=_.reject(f[b.stack],{id:b.id}),_.isFunction(b.ondismiss)&&a(function(){b.ondismiss(b)},0,1)}var e="page",f={};f[e]=[];var g=[],h={type:"info",timeout:-1,loading:!1,show:"immediate",dismiss:"next",ondismiss:_.noop(),stack:"page",repeat:!0},i=function(a){!a.repeat&&_.find(f[a.stack],{text:a.text,type:a.type})||(a.timeout>-1&&c(a),a.text.length>0&&f[a.stack].push(a))},j=function(a,b){var c,e=a[b][0],f=a[b][1];"show"==b?c=i:"dismiss"==b&&(c=d,e.$on("$destroy",function(){d(a)})),e.$watch(f,function(b){b===!0&&c(a)})},k=function(){_.forOwn(f,function(a,b){f[b]=_.reject(f[b],{dismiss:h.dismiss})})},l=function(){_.each(g,function(a){i(a)}),g.length=0},m=function(a){f.hasOwnProperty(a)&&(f[a].length=0)},n=function(a,b){var c={text:a};b=b||{},b.id=_.uniqueId();var d=b.stack||e;return _.isArray(f[d])||(f[d]=[]),_.defaults(b,h),_.merge(c,b),_.isArray(c.dismiss)&&j(c,"dismiss"),c.show==h.show?i(c):"next"==c.show?g.push(c):_.isArray(c.show)&&j(c,"show"),c};return b.$on("$routeChangeSuccess",function(){k(),l()}),{add:n,clear:m,dismiss:d,stacks:f}}]),angular.module("encore.ui.rxOptionTable",["encore.ui.atoms","ngSanitize"]),angular.module("encore.ui.rxOptionTable").directive("rxFormOptionTable",["rxOptionTableDirective",function(a){var b="DEPRECATION WARNING: rxFormOptionTable has been marked as deprecated and will be removed in a future release of the EncoreUI framework. Please use rxOptionTable as a stand-in replacement.";return console.warn(b),a[0]}]),angular.module("encore.ui.rxOptionTable").directive("rxOptionTable",["$interpolate",function(a){return{restrict:"E",templateUrl:"templates/rxOptionTable.html",scope:{data:"=",columns:"=",selected:"@",type:"@",model:"=",fieldId:"@",required:"=",emptyMessage:"@",disableFn:"&?"},link:function(b,c){var d=0;b.selectAllModel=!1,b.$watchCollection("modelProxy",function(a){b.selectAllModel=!_.any(a,function(a){return a===!1})});var e=function(a,b){return _.isUndefined(a)||_.isUndefined(b)?!1:a==b};b.selectAll=function(a){b.selectAllModel=!a,b.modelProxy.forEach(function(a,c){b.modelProxy[c]=b.selectAllModel,b.updateCheckboxes(b.selectAllModel,c)})},b.checkDisabled=function(a){return b.disableFn({tableId:c.attr("id"),fieldId:b.fieldId,rowId:a.id})},b.isCurrent=function(a){return e(a,b.selected)},b.isSelected=function(a,c){if(!b.isCurrent(a)){if("radio"==b.type)return a==b.model;if("checkbox"==b.type)return _.isUndefined(a)?b.modelProxy[c]:e(a,b.model[c])}return!1},b.checkRequired=function(){return _.isBoolean(b.required)?b.required&&0===d:!1},b.modelProxy=_.map(b.model,function(a,c){var d=b.data[c],e=_.has(d,"value")?d.value:!0;return a===e}),_.forEach(b.modelProxy,function(a){a&&(d+=1)}),b.updateCheckboxes=function(a,c){var e=b.data[c],f=_.has(e,"value")?e.value:!0,g=_.has(e,"falseValue")?e.falseValue:!1;b.model[c]=a?f:g,a?d+=1:d-=1},b.getContent=function(b,c){var d=b.key;if(!d)return"";if(c.hasOwnProperty(d))return String(c[d]);var e=a(d)(c);return e}}}}]),angular.module("encore.ui.utilities").factory("rxPageTitle",["$document","$filter",function(a,b){var c="",d="",e=function(a){d=""!==c?a+c:a},f=function(b){a.prop("title",b)};return{setSuffix:function(a){c=a},getSuffix:function(){return c},setTitle:function(a){e(a),f(d)},setTitleUnsafeStripHTML:function(a){e(a),f(b("rxUnsafeRemoveHTML")(d))},getTitle:function(){return a.prop("title")}}}]),angular.module("encore.ui.rxPaginate",["encore.ui.utilities","debounce"]),angular.module("encore.ui.rxPaginate").directive("rxLoadingOverlay",["$compile",function(a){var b='<div ng-show="showLoadingOverlay" class="loading-overlay"><div class="loading-text-wrapper"><i class="fa fa-fw fa-lg fa-spin fa-circle-o-notch"></i><div class="loading-text">Loading...</div></div></div>';return{restrict:"A",scope:!0,controller:["$scope",function(a){this.show=function(){a.showLoadingOverlay=!0},this.hide=function(){a.showLoadingOverlay=!1},this.showAndHide=function(a){this.show(),a["finally"](this.hide)}}],link:function(c,d){d.css({position:"relative"}),c.showLoadingOverlay=!1,a(b)(c,function(a){d.append(a)})}}}]),angular.module("encore.ui.rxPaginate").directive("rxPaginate",["$q","$compile","debounce","PageTracking","rxPromiseNotifications",function(a,b,c,d,e){return{templateUrl:"templates/rxPaginate.html",replace:!0,restrict:"E",require:"?^rxLoadingOverlay",scope:{pageTracking:"=",numberOfPages:"@",serverInterface:"=?",filterText:"=?",selections:"=?",sortColumn:"=?",sortDirection:"=?"},link:function(a,b,d,f){var g=d.errorMessage;f=f||{show:_.noop,hide:_.noop,showAndHide:_.noop};for(var h=b.parent();h.length&&"TABLE"!==h[0].tagName;)h=h.parent();var i=h;if(a.scrollToTop=function(){i[0].scrollIntoView(!0)},!_.isUndefined(a.serverInterface)){var j=function(){var b=a.sortDirection?"DESCENDING":"ASCENDING";return{filterText:a.filterText,selections:a.selections,sortColumn:a.sortColumn,sortDirection:b}},k=function(b,c){var d=a.serverInterface.getItems(b,c,j());return f.showAndHide(d),g&&e.add(d,{error:g}),d};a.pageTracking.updateItemsFn(k);var l=function(){var b=0;a.pageTracking.newItems(k(b,a.pageTracking.itemsPerPage))},m=c(l,100),n=c(l,500),o=c(l,1e3),p=function(a){return function(b,c){b!==c&&a()}};_.isUndefined(a.filterText)||a.$watch("filterText",p(n)),_.isUndefined(a.selections)||a.$watch("selections",p(o),!0),_.isUndefined(a.sortColumn)||a.$watch("sortColumn",p(m)),_.isUndefined(a.sortDirection)||a.$watch("sortDirection",p(m)),l()}}}}]),angular.module("encore.ui.utilities").factory("rxPaginateUtils",function(){var a={};return a.firstAndLast=function(a,b,c){var d=a*b,e=d+b,f=e>c?c:e;return{first:d,last:f}},a.calculateApiVals=function(a,b,c){var d=Math.floor(a*b/c),e=a*b-c*d;return{serverPageNumber:d,offset:e}},a}),angular.module("encore.ui.rxPermission",["encore.ui.utilities"]),angular.module("encore.ui.rxPermission").directive("rxPermission",function(){return{restrict:"E",transclude:!0,scope:{role:"@"},templateUrl:"templates/rxPermission.html",controller:["$scope","Permission",function(a,b){a.hasRole=function(a){return b.hasRole(a)}}]}}),angular.module("encore.ui.utilities").factory("rxPromiseNotifications",["rxNotify","$rootScope","$q","$interpolate",function(a,b,c,d){var e=b.$new(),f=function(){this.loadingMsg&&a.dismiss(this.loadingMsg)},g=function(b,c){if(b in this.msgs&&!this.isCancelled){var e=d(this.msgs[b]),f=e(c),g={type:b};this.stack&&(g.stack=this.stack),a.add(f,g)}},h=function(){this.isCancelled=!0,this.deferred.reject()},i=function(d,i,j){var k=c.defer(),l=_.uniqueId("promise_");e[l]={isCancelled:!1,msgs:i,stack:j};var m={loading:!0};return j&&(m.stack=j),i.loading&&(e[l].loadingMsg=a.add(i.loading,m)),k.promise.then(g.bind(e[l],"success"),g.bind(e[l],"error"))["finally"](f.bind(e[l])),d.then(function(a){k.resolve(a)},function(a){k.reject(a)}),b.$on("$routeChangeStart",h.bind(e[l])),e[l].deferred=k,e[l]};return{add:i}}]),angular.module("encore.ui.rxRadio",[]),angular.module("encore.ui.rxRadio").directive("rxRadio",function(){return{restrict:"A",scope:{ngDisabled:"=?"},compile:function(a,b){return a.attr("type","radio"),b.type="radio",function(a,b,c){var d="rx-disabled",e='<div class="rxRadio"></div>',f='<div class="fake-radio"><div class="tick"></div></div>';b.wrap(e),b.after(f);var g=b.parent();c.disabled&&g.addClass(d),_.has(c,"ngDisabled")&&a.$watch("ngDisabled",function(a){a===!0?g.addClass(d):g.removeClass(d)});var h=function(){g.remove()};b.on("$destroy",function(){a.$evalAsync(h)})}}}}),angular.module("encore.ui.utilities").service("rxScreenshotSvc",["$log","$q",function(a,b){var c=function(){var a="function"==typeof html2canvas;return a};return{capture:function(d){var e=b.defer();return c()?html2canvas(d,{onrendered:function(a){var b=a.toDataURL("image/png");e.resolve(b)}}):(a.warn("rxScreenshotSvc: no screenshot captured, missing html2canvas dependency"),e.reject("html2canvas not loaded")),e.promise}}}]),angular.module("encore.ui.rxSearchBox",[]),angular.module("encore.ui.rxSearchBox").directive("rxSearchBox",function(){return{restrict:"E",require:["ngModel","?^rxFloatingHeader"],templateUrl:"templates/rxSearchBox.html",scope:{searchVal:"=ngModel",isDisabled:"@ngDisabled",rxPlaceholder:"=?"},controller:["$scope",function(a){a.searchVal=a.searchVal||"",a.rxPlaceholder=a.rxPlaceholder||"Search...",a.$watch("searchVal",function(b){!b||a.isDisabled?a.isClearable=!1:a.isClearable=""!==b.toString()}),a.clearSearch=function(){a.searchVal=""}}],link:function(a,b,c,d){var e=d[1];_.isObject(e)&&e.update()}}}),angular.module("encore.ui.rxSelect",[]),angular.module("encore.ui.rxSelect").directive("rxSelect",function(){return{restrict:"A",scope:{ngDisabled:"=?"},link:function(a,b,c){var d="rx-disabled",e='<div class="rxSelect"></div>',f='<div class="fake-select"><div class="select-trigger"><i class="fa fa-fw fa-caret-down"></i></div></div>';b.wrap(e),b.after(f);var g=b.parent();_.has(c,"disabled")&&g.addClass(d),_.has(c,"ngDisabled")&&a.$watch("ngDisabled",function(a){a===!0?g.addClass(d):g.removeClass(d)});var h=function(){g.remove()};b.on("$destroy",function(){a.$evalAsync(h)})}}}),angular.module("encore.ui.rxSelectFilter",["encore.ui.utilities","encore.ui.rxMisc","encore.ui.rxSelect"]),angular.module("encore.ui.rxSelectFilter").directive("rxSelectFilter",["rxNestedElement",function(a){return a({parent:"rxFormSection",restrict:"E",templateUrl:"templates/rxSelectFilter.html",scope:{filter:"="}})}]),angular.module("encore.ui.rxSortableColumn",[]),angular.module("encore.ui.rxSortableColumn").directive("rxSortableColumn",function(){return{restrict:"E",templateUrl:"templates/rxSortableColumn.html",transclude:!0,scope:{sortMethod:"&",sortProperty:"@",predicate:"=",reverse:"="}}}),angular.module("encore.ui.utilities").filter("rxSortEmptyTop",["$filter","$parse",function(a,b){return function(c,d,e){var f=b(d),g=function(a){return f(a)||""};return a("orderBy")(c,g,e)}}]),angular.module("encore.ui.utilities").factory("rxSortUtil",function(){var a={};return a.getDefault=function(a,b){return{predicate:a,reverse:b}},a.sortCol=function(a,b){var c=a.sort.predicate===b?!a.sort.reverse:!1;a.sort={reverse:c,predicate:b},a.pager&&(a.pager.pageNumber=0)},a}),angular.module("encore.ui.rxSpinner",[]),angular.module("encore.ui.rxSpinner").directive("rxSpinner",function(){return{restrict:"A",scope:{toggle:"=",rxSpinner:"@",size:"@"},link:function(a,b){a.$watch("toggle",function(c){var d=a.size?a.size:"",e=a.rxSpinner?a.rxSpinner:"";c?b.prepend('<div class="rx-spinner '+e+" "+d+'"></div> '):b.find("div").remove()})}}}),angular.module("encore.ui.rxStatusColumn",["encore.ui.utilities"]),angular.module("encore.ui.rxStatusColumn").directive("rxStatusColumn",["rxStatusMappings","rxStatusColumnIcons",function(a,b){return{templateUrl:"templates/rxStatusColumn.html",restrict:"A",scope:{status:"@",api:"@",tooltipContent:"@"},link:function(c,d){var e="",f=function(){c.tooltipText=c.tooltipContent||c.status||""},g=function(g){c.mappedStatus=a.getInternalMapping(g,c.api),f(),c.statusIcon=b[c.mappedStatus]||"fa-exclamation-circle",d.addClass("status"),d.removeClass(e),e="status-"+c.mappedStatus,
d.addClass(e),d.addClass("rx-status-column")};c.$watch("status",function(a){g(a)}),c.$watch("tooltipContent",function(){f()})}}}]),angular.module("encore.ui.rxStatusColumn").directive("rxStatusHeader",function(){return{link:function(a,b){b.addClass("rx-status-header")}}}),angular.module("encore.ui.utilities").value("rxStatusColumnIcons",{ERROR:"fa-ban",WARNING:"fa-exclamation-triangle",INFO:"fa-info-circle"}),angular.module("encore.ui.utilities").factory("rxStatusMappings",function(){var a={},b={},c={},d=function(a,b){return b.toUpperCase()};c.addGlobal=function(b){_.assign(a,b,d)},c.addAPI=function(a,c){var e=b[a]||{};_.assign(e,c,d),b[a]=e};var e=function(a){return function(b,d){var e={};_.isString(b)?e[b]=a:_.isArray(b)&&_.each(b,function(b){e[b]=a}),d?c.addAPI(d,e):c.addGlobal(e)}};return c.mapToActive=e("ACTIVE"),c.mapToWarning=e("WARNING"),c.mapToError=e("ERROR"),c.mapToInfo=e("INFO"),c.mapToPending=e("PENDING"),c.mapToDisabled=e("DISABLED"),c.getInternalMapping=function(c,d){if(_.has(b,d)&&_.has(b[d],c))return b[d][c];var e=a[c];return e?e:c},c}),angular.module("encore.ui.utilities").provider("rxStatusTags",function(){var a={alpha:{"class":"alpha-status",text:"Alpha"},beta:{"class":"beta-status",text:"Beta"}};this.addStatus=function(b){a[b.key]={text:b.text,"class":b["class"]}},this.$get=function(){return{getTag:function(b){return _.has(a,b)?a[b]:{"class":"",text:""}},hasTag:function(b){return _.has(a,b)}}}}),angular.module("encore.ui.rxTags",["encore.ui.utilities","encore.ui.rxMisc","ui.bootstrap"]),angular.module("encore.ui.rxTags").directive("rxTags",["rxDOMHelper",function(a){return{templateUrl:"templates/rxTags.html",restrict:"E",require:"ngModel",scope:{options:"="},link:function(b,c,d,e){function f(a){(a.target.previousElementSibling||h).focus()}var g=a.find(c,".rx-tags")[0],h=c.find("input")[0];d.$observe("disabled",function(a){b.disabled=""===a||a}),b.focusInput=function(a){a.target===g&&h.focus()},b.removeIfBackspace=function(a,c){8===a.keyCode&&(a.preventDefault(),b.remove(c),f(a))},b.focusTag=function(a,b){8===a.keyCode&&_.isEmpty(b)&&f(a)},b.add=function(a){b.tags.push(a),e.$setViewValue(b.tags),b.newTag=""},b.remove=function(a){_.remove(b.tags,a),e.$setViewValue(b.tags),h.focus()},_.isEmpty(d.key)||(e.$parsers.push(function(a){return _.pluck(a,d.key)}),e.$formatters.push(function(a){return b.options.filter(function(b){return _.contains(a,b[d.key])})})),e.$render=function(){b.tags=e.$viewValue||[]}}}}]),angular.module("encore.ui.molecules").directive("rxTimePicker",["rxTimePickerUtil","UtcOffsets",function(a,b){return{restrict:"E",require:"ngModel",scope:{modelValue:"=ngModel",isDisabled:"=ngDisabled"},templateUrl:"templates/rxTimePicker.html",link:function(c,d,e,f){var g=a;c.availableUtcOffsets=b,c.isPickerVisible=!1,c.openPopup=function(){if(c.isPickerVisible=!0,c.hour="",c.minutes="",c.period="AM",c.offset="+00:00",!_.isEmpty(c.modelValue)){var a=g.modelToObject(c.modelValue);c.hour=a.hour,c.minutes=a.minutes,c.period=a.period,c.offset=a.offset}},c.closePopup=function(){c.isPickerVisible=!1},c.togglePopup=function(){c.isDisabled||(c.isPickerVisible?c.closePopup():c.openPopup())},c.submitPopup=function(){var a=moment([c.hour+":"+c.minutes,c.period,c.offset].join(" "),"hh:mm A Z");a.utcOffset(c.offset),f.$setViewValue(a.format(g.viewFormat)),f.$render(),c.closePopup()},f.$formatters.push(function(a){var b=moment(a,g.modelFormat);if(b.isValid()){var c=g.parseUtcOffset(a);return b.utcOffset(c),b.format(g.viewFormat)}return a}),f.$parsers.push(function(a){var b=moment(a,g.viewFormat);if(b.isValid()){var c=g.parseUtcOffset(a);return b.utcOffset(c),b.format(g.modelFormat)}return a}),f.$render=function(){c.displayValue=f.$viewValue||""}}}}]),angular.module("encore.ui.utilities").factory("rxTimePickerUtil",function(){function a(a){var b=/([-+]\d{2}:?\d{2})/,c=a.match(b);return c?c[0]:""}function b(b){var d=moment(b,c),e=a(b),f={hour:"",minutes:"",period:"AM",offset:_.isEmpty(e)?"+0000":e};return _.isEmpty(e)||d.utcOffset(e),d.isValid()&&(f.hour=d.format("h"),f.minutes=d.format("mm"),f.period=d.format("A")),f}var c="HH:mmZ",d="HH:mm (UTCZZ)";return{parseUtcOffset:a,modelToObject:b,modelFormat:c,viewFormat:d}}),angular.module("encore.ui.rxToggle",[]),angular.module("encore.ui.rxToggle",[]).directive("rxToggle",function(){return{restrict:"A",link:function(a,b,c){var d=c.rxToggle;b.on("click",function(){a.$apply(function(){a.$eval(d+" = !"+d)})})}}}),angular.module("encore.ui.rxToggleSwitch",[]),angular.module("encore.ui.rxToggleSwitch").directive("rxToggleSwitch",function(){return{restrict:"E",templateUrl:"templates/rxToggleSwitch.html",require:"ngModel",scope:{model:"=ngModel",disabled:"=?",postHook:"&",trueValue:"@",falseValue:"@"},link:function(a,b,c,d){var e=_.isUndefined(a.trueValue)?!0:a.trueValue,f=_.isUndefined(a.falseValue)?!1:a.falseValue;(_.isUndefined(a.model)||a.model!==e)&&(a.model=f),d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f}),d.$render=function(){a.state=d.$viewValue?"ON":"OFF"},a.update=function(){a.disabled||(d.$setViewValue(!d.$viewValue),d.$render(),a.postHook({value:d.$modelValue}))}}}}),angular.module("encore.ui.utilities").filter("rxUnsafeRemoveHTML",["$document",function(a){return function(b){_.isEmpty(b)&&(b="");var c=a[0].createElement("div");return c.innerHTML=b,c.textContent||c.innerText||""}}]),angular.module("encore.ui.utilities").factory("rxVisibility",function(){var a={},b=function(b,c){a[b]=c},c=function(b){return a[b]},d=function(b){return _.has(a,b)},e=function(a){b(a.name,a.method)};return{addMethod:b,getMethod:c,hasMethod:d,addVisibilityObj:e}}),angular.module("encore.ui.utilities").factory("rxVisibilityPathParams",["$routeParams",function(a){var b={name:"rxPathParams",method:function(b,c){return!_.isUndefined(a[c.param])}};return b}]),angular.module("encore.ui.utilities").service("SelectFilter",function(){return{create:function(a){function b(b){d.properties.forEach(function(c){_.isUndefined(d.available[c])&&(d.available[c]=_.uniq(_.pluck(b,c))),_.isUndefined(a.selected[c])&&(d.selected[c]=_.clone(d.available[c]))})}function c(a){return d.properties.every(function(b){return _.contains(d.selected[b],a[b])})}a=_.defaults(a,{properties:[],available:{},selected:_.isUndefined(a.available)?{}:_.cloneDeep(a.available)});var d=_.cloneDeep(a),e=!0;return d.applyTo=function(a){return e&&(e=!1,b(a)),a.filter(c)},d}}}),angular.module("encore.ui.utilities").factory("Session",["rxLocalStorage",function(a){var b="encoreSessionToken",c={};return c.getByKey=function(a){var b,d=c.getToken(),e=a?a.split("."):void 0;if(!_.isEmpty(d)&&e)return b=_.reduce(e,function(a,b){return a?a[b]:void 0},d)},c.getToken=function(){return a.getObject(b)},c.getTokenId=function(){return c.getByKey("access.token.id")},c.getUserId=function(){return c.getByKey("access.user.id")},c.getUserName=function(){return c.getByKey("access.user.name")},c.storeToken=function(c){a.setObject(b,c)},c.logout=function(){a.removeItem(b)},c.isCurrent=function(){var a=c.getByKey("access.token.expires");return a?new Date(a)>_.now():!1},c.isAuthenticated=function(){var a=c.getToken();return _.isEmpty(a)?!1:c.isCurrent()},c}]),angular.module("encore.ui.utilities").service("SessionStorage",["$window",function(a){this.setItem=function(b,c){a.sessionStorage.setItem(b,c)},this.getItem=function(b){return a.sessionStorage.getItem(b)},this.key=function(b){return a.sessionStorage.key(b)},this.removeItem=function(b){a.sessionStorage.removeItem(b)},this.clear=function(){a.sessionStorage.clear()},this.__defineGetter__("length",function(){return a.sessionStorage.length}),this.setObject=function(a,b){var c=_.isObject(b)||_.isArray(b)?JSON.stringify(b):b;this.setItem(a,c)},this.getObject=function(b){var c=a.sessionStorage.getItem(b);try{c=JSON.parse(c)}catch(d){return c}return c}}]),angular.module("encore.ui.utilities").service("Status",["$rootScope","rxNotify","ErrorFormatter",function(a,b,c){var d,e="page",f={LOADING:function(){return{loaded:!1,loading:!0,prop:"loaded"}},SUCCESS:function(){return{loaded:!0,loading:!1,success:!0,type:"success",prop:"loaded",repeat:!1,timeout:5}},ERROR:function(){return{loaded:!0,loading:!1,success:!1,type:"error",prop:"loaded",repeat:!1}},WARNING:function(){return{loaded:!0,loading:!1,success:!0,type:"warning",prop:"loaded"}},INFO:function(){return{loaded:!0,loading:!1,success:!0,type:"info",prop:"loaded"}},CLEAR:function(){return{loading:!1,prop:"loaded"}}},g=function(a){return _.has(a,"loading")&&!_.has(a,"type")},h=function(a,b){b=_.isUndefined(b)?!0:b,_.has(a,"prop")&&_.has(d,a.prop)&&(d[a.prop]=b)};return a.$on("$routeChangeStart",function(){f.setStack("page")}),f.setStack=function(a){e=a},f.setScope=function(a){d=a,d.loaded=!1},f.setStatus=function(a,c){return c.stack=e,!_.has(c,"dismiss")&&g(c)&&(_.has(d[c.prop],"$resolved")&&(c.prop=c.prop+".$resolved"),c.dismiss=[d,c.prop]),"success"===c.type&&(c.show=c.show||"next"),h(c,_.has(c,"loading")?!c.loading:!0),d.status=c,b.add(a,c)},f.setLoading=function(a,b){b=_.defaults(b?b:{},f.LOADING());var c=b.prop;return _.has(d,c)||(d[c]=!1),f.setStatus(a||"",b)},f.setSuccess=function(a,b){return b=_.defaults(b?b:{},f.SUCCESS()),f.setStatus(a||"",b)},f.setSuccessNext=function(a,b){var c={show:"next"};return b=_.defaults(b?b:{},c),f.setSuccess(a,b)},f.setSuccessImmediate=function(a,b){var c={show:"immediate"};return b=_.defaults(b?b:{},c),f.setSuccess(a,b)},f.setWarning=function(a,b){return b=_.defaults(b?b:{},f.WARNING()),f.setStatus(a,b)},f.setInfo=function(a,b){return b=_.merge(b?b:{},f.INFO()),f.setStatus(a,b)},f.setError=function(a,b,d){return d=_.defaults(d?d:{},f.ERROR()),a=c.buildErrorMsg(a||"",b),f.setStatus(a,d)},f.complete=function(a){return f.setSuccessImmediate("",_.defaults(a?a:{},f.SUCCESS()))},f.dismiss=function(a){return d.status=f.CLEAR(),b.dismiss(a)},f.clear=function(a){return d.status=f.CLEAR(),b.clear(a||e)},f}]),angular.module("encore.ui.utilities").service("StatusUtil",["$route","$rootScope","Status",function(a,b,c){return{setupScope:function(a){c.setScope(a||b)}}}]),angular.module("encore.ui.tabs",[]),angular.module("encore.ui.utilities").filter("titleize",function(){return function(a){return a.toLowerCase().replace(/_/g," ").replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})}}),angular.module("encore.ui.utilities").provider("TokenInterceptor",function(){var a=this.exclusionList=["rackcdn.com"];this.$get=["Session","$document",function(b,c){var d=c[0].createElement("a");return{request:function(c){d.href=c.url;var e=_.some(a,function(a){return _.contains(d.hostname,a)?!0:void 0});return e||(c.headers["X-Auth-Token"]=b.getTokenId()),c}}}]}),angular.module("encore.ui.tooltips",[]),angular.module("encore.ui.typeahead",["ui.bootstrap"]),angular.module("encore.ui.typeahead").config(["$provide",function(a){a.decorator("typeaheadDirective",["$delegate","$filter",function(a,b){var c=a[0],d=c.link,e=b("lowercase");return c.compile=function(){return function(a,b,c,f){if(d.apply(this,arguments),/allowEmpty/.test(c.typeahead)){var g="$EMPTY$";f.$parsers.unshift(function(a){var b=_.isEmpty(a)?g:a;return f.$viewValue=b,b}),f.$parsers.push(function(a){return a===g?"":a}),b.on("click",function(){a.$apply(function(){f.$setViewValue(f.$viewValue)})}),a.allowEmpty=function(a,b){return b===g?!0:-1!==e(a).indexOf(e(b))}}}},a}])}]),angular.module("encore.ui.utilities").factory("UnauthorizedInterceptor",["$q","$window","Session",function(a,b,c){var d={redirectPath:function(){return b.location.pathname},redirect:function(a){a=a?a:"/login?redirect=",b.location=a+encodeURIComponent(d.redirectPath())},responseError:function(b){return 401===b.status&&(c.logout(),d.redirect()),a.reject(b)}};return d}]),angular.module("encore.ui.utilities").service("urlUtils",["$location","rxEnvironmentUrlFilter","$interpolate","$route","$document",function(a,b,c,d,e){this.stripLeadingChars=function(a){var b=/^((?:\/|#)+)/;return a.replace(b,"")},this.stripTrailingSlash=function(a){var b=/\/$/;return a.replace(b,"")},this.getChunks=function(a){return _.isString(a)?_.compact(a.split("/")):[""]},this.getFullPath=function(){var b=e.find("base"),c="";return b.length>0&&(c=b[0].getAttribute("href"),c=this.stripTrailingSlash(c)),c+a.path()},this.getCurrentPathChunks=function(){var a=this.stripLeadingChars(this.getFullPath());return this.getChunks(a)},this.getItemUrl=function(a){if(_.isString(a.url)){var b=a.url.split("?")[0];return b=this.stripLeadingChars(b)}},this.isActive=function(b,c){var d=this.getChunks(this.getItemUrl(b)),e=d.length,f=this.matchesSubChunks(c,d,e);return f||(f=this.matchesSubChunks(this.getChunks(a.hash()),d,e)),!f&&b.children&&(f=_.any(b.children,"active")),f},this.buildUrl=function(a,e){if(_.isUndefined(a))return a;if(a=b(a),d.current){var f=_.defaults(e||{},d.current.pathParams);a=c(a)(f)}return a},this.matchesSubChunks=function(a,b,c){return _.isEqual(a.slice(0,c),b)}}]),angular.module("encore.ui.utilities").constant("UtcOffsets",["-12:00","-11:00","-10:00","-09:30","-09:00","-08:00","-07:00","-06:00","-05:00","-04:30","-04:00","-03:30","-03:00","-02:00","-01:00","+00:00","+01:00","+02:00","+03:00","+03:30","+04:00","+04:30","+05:00","+05:30","+05:45","+06:00","+06:30","+07:00","+08:00","+08:30","+08:45","+09:00","+09:30","+10:00","+10:30","+11:00","+12:00","+12:45","+13:00","+14:00"]),angular.module("encore.ui.utilities").filter("xor",function(){return function(){return _.xor.apply(_,arguments)}});
//# sourceMappingURL=encore-ui.min.js.map